{% extends "index.html" %}

{% block content %}
    <div class="container" id="page_data">
        <div class="row center">
            <div class="col-sm-12 col-md-4" style="display:inline-block">
                <div class="row center padding-top-bottom">
                <div class="row">
                    <a href="http://stats.gleague.nba.com/player/#!/{{ player.gleague_id }}" target="_blank">
                        <h3 style="display:inline;color:black;" class="center">{{ player.name }}</h3>
                    </a>
                    <h4 style="display:inline;"><img class="logo" src="http://stats.gleague.nba.com/media/img/teams/logos/{{ player.team }}.svg">Age: {{ player.age }}</h4>
                </div>
                <div class="row">
                    {% if player.height != "" %}
                        <h4 style="display:inline;"> {{ player.height }} | </h4>
                    {% endif %}
                    {% if player.weight != "" %}
                        <h4 style="display:inline;"> {{ player.weight }} lbs | </h4>
                    {% endif %}
                    {% if player.bg != "" %}
                        <h4 style="display:inline;"> {{ player.bg }}</h4>
                    {% endif %}
                    {% if player.position != "" %}
                        <h4 style="display:inline;">| {{ player.position }} </h4>
                    {% endif %}
                </div>
            </div>
                <div class="row" style="text-align:center;">
                <div class="col-xs-12 col-sm-6 col-md-8">
                    <div class="row">
                        <img class="main-headshot" src="https://ak-static.cms.nba.com/wp-content/uploads/headshots/dleague/{{ player.pic_id }}.png" onerror="usePlaceholder(this)">
                    </div>
                    <div class="row center padding-20">
                        <details>
                            <summary id="cluster-no-blue">
                                <span>G League Clusters:<br>{{ player.gnb_cluster }} (GNB)</span><br>
                                <span>{{ player.knn_cluster }} (knn)</span>
                            </summary>
                            <p class="padding-top">Based on the RCC framework which uses a Gaussian Naive Bayes model for classification. Refer to the diagram on the right to discover the role-transformations {{ player.cluster }}s typically make once they get to the NBA. </p>
                        </details>
                    </div>
                </div>
                <div class="col-xs-12 col-sm-6 col-md-4 padding-20">

                    <div class="row center" style="font-size: 12px;">
                        <strong>2017-2018 G League Stats per 36 Min:</strong>
                        <p style="padding-top:10px;"><sup class="name">GP</sup>{{ player.gp }}</p>
                        <p><sup class="name">PTS</sup>{{ player.pts }}</p>
                        <p><sup class="name">FGA</sup>{{ player.fga }}</p>
                        <p><sup class="name">3PM</sup>{{ player.threepm }}</p>
                        <p><sup class="name">REB</sup>{{ player.reb }}</p>
                        <p><sup class="name">AST</sup>{{ player.ast }}</p>
                    </div>
                </div>
            </div>

        </div>

        <div class="col-sm-12 col-md-8" style="display:inline-block">
            <div class="row" style="text-align:center !important;padding-top: 40px;">
                <img style="width:90%;" src="{{ url_for('static', filename='cluster_alluvial.png') }}">
            </div>
            <div class="row">
                <span style="font-size: 11px;"> Use this flow chart to visualize the role-transformations that exist between the G League and the NBA </span>
            </div>
        </div>
    </div>

        <div class="row padding-top-bottom" style="text-align: center;" >
        {% if player.gamelog != None %}
            <div class="col-sm-12 col-md-6">
                <h3>Last 10 Games Log</h3>
                <div class="table-responsive">
                    <table class="table table-striped table-bordered table-hover">
                        <thead>
                        <tr>
                            <th>Date</th>
                            <th>Matchup</th>
                            <th>Result</th>
                            <th>Min</th>
                            <th>PTS</th>
                            <th>FGA</th>
                            <th>3PM</th>
                            <th>REB</th>
                            <th>AST</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for game in player.gamelog %}
                            <tr>
                                <td>{{ game[3] }}</td>
                                <td>{{ game[4] }}</td>
                                <td>{{ game[5] }}</td>
                                <td>{{ game[6] }}</td>
                                <td>{{ game[24] }}</td>
                                <td>{{ game[8] }}</td>
                                <td>{{ game[10] }}</td>
                                <td>{{ game[18] }}</td>
                                <td>{{ game[19] }}</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
            {% endif %}
            <div class="col-sm-12 col-md-6" >
                <h3>2017-18 Shot Chart</h3>
                <iframe id="shotchart" width="375px" height="436px" src="http://stats.gleague.nba.com/shotchart/#!/?CFID=33&CFPARAMS=2017-18&PlayerID={{ player.id }}&TeamID=0&GameID=&ContextMeasure=FGA&Season=2017-18&SeasonType=Regular%20Season&MeasureType=Base&LeagueID=20&PerMode=PerGame&PlusMinus=N&PaceAdjust=N&Rank=N&Outcome=&Location=&Month=0&SeasonSegment=&OpponentTeamID=0&VsConference=&VsDivision=&GameSegment=&Period=0&LastNGames=0&DateFrom=&DateTo=&PORound=0&ShotClockRange=&mtype=&mtitle=&mode=Advanced&showZones=0&showDetails=0&showShots=1"></iframe>
            </div>
        </div>

    <div class="row center padding-20">
    <div class="row padding-top-bottom">
        <h3>Three G League Player Comparisons using k-nearest neighbors:</h3>
    </div>
    <div class="row padding-20">
        {% for n in player.neighbors %}
            <div class="col-sm-12 col-md-4">
                <div class="row center">
                    <img class="neighbor-headshot center comparisons"
                         src="https://d2cwpp38twqe55.cloudfront.net/req/201712064/images/players/{{ n.pic_id }}.jpg" onerror="usePlaceholder(this)">
                    <h4 class="center">{{ n.name }}</h4>
                </div>
                <div class="row">
                    <strong>G League Cluster: {{ n.gleague_cluster }}</strong><br>
                    <strong>NBA Cluster: {{ n.nba_cluster }}</strong>
                </div>
                <div class="row padding-20">

                    <table class="table table-striped table-bordered table-hover table-responsive stats">
                        <thead>
                        <tr>
                            <th></th>
                            <th>G League</th>
                            <th>NBA</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>
                                GP
                            </td>
                            <td>
                                {{ n.gl_g }}
                            </td>
                            <td>
                                {{ n.nba_g }}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                PTS
                            </td>
                            <td>
                                {{ n.gl_pts }}
                            </td>
                            <td>
                                {{ n.nba_pts}}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                FGA
                            </td>
                            <td>
                                {{ n.gl_fga }}
                            </td>
                            <td>
                                {{ n.nba_fga }}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                3PM
                            </td>
                            <td>
                                {{ n.gl_threepm }}
                            </td>
                            <td>
                                {{ n.nba_threepm }}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                REB
                            </td>
                            <td>
                                {{ n.gl_reb }}
                            </td>
                            <td>
                                {{ n.nba_reb }}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                AST
                            </td>
                            <td>
                                {{ n.gl_ast }}
                            </td>
                            <td>
                                {{ n.nba_ast }}
                            </td>
                        </tr>


                        </tbody>
                    </table>
                </div>

            </div>
        {% endfor %}
    </div></div></div>
{% endblock %}